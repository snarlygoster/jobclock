{% load timedelta %}
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>Work Totals</title>
</head>
<body>


{% if params %}
    <ul>

{% for name,value in params.items %}
   	<li> {{ name }}: {{ value }}</li>
{% endfor %}

{% for name,value in bugs.items %}
   	<li>bug {{ name }}: {{ value }}</li>
{% endfor %}

</ul>

{% else %}
     <p>no params</p>

{% endif %}
<h1>Work Totals</h1>
<h2>By Job</h2>

start date: {{ start_date }}
end date: {{ end_date }}

<ul>

{% for job,details in jobs.items %}
    	<li>{{job.ticket}} -- {{details.total|timedelta_fmt}}
    	<ul>
        
        {% for wp in details.work_periods %}
            <li>{{ wp.worker.name }} {{ wp.start_time|date:"M d H:i" }} {{ wp.duration|timedelta_fmt }}</li>
        {% endfor %}
    		
    	</ul>
{% endfor %}
	
</ul>
<table>
<tr><th>Complete</th><th>ticket</th><th>description</th><th>total hours:minutes</th></tr>
{% for job, total_time in job_total.items %}
	<tr>
	  <td>
	  {% if job.job_complete %}
	      Done
	  {% else %}
	       No
	  {% endif %}
	  </td>
		<td>{{ job.ticket }}</td>
		<td>{{ job.description }}</td>
		<td>{{ total_time|timedelta_fmt }}</td>
	</tr>
{% endfor %}
</table>


<h2>By Person</h2>
<table>
{% for worker, total_time in worker_total.items %}
    <tr>
    <td>{{ worker.name }}</td>
    <td>{{ total_time|timedelta_fmt }}</td>
    </tr>
{% endfor %}
</table>
</body>
</html>